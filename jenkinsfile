pipeline{
    agent any 
    stages{
        stage("Gradle Build") {
            steps{
                script{
             if (isUnix()) {
                 sh 'chmod +x gradlew'
                 sh './gradlew clean build'
    } 
             else {
                 sh 'chmod +x gradlew'
                 bat 'gradlew.bat clean build'
    }
}
            }
        }
        stage("Gradle test") {
            steps{
                script{
             if (isUnix()) {
                 sh 'chmod +x gradlew'
                 sh './gradlew  test'
    } 
             else {
                 sh 'chmod +x gradlew'
                 bat 'gradlew.bat test'
    }
}
            }
        }
        
        stage("sonar quality check"){

            
            steps{
                script{
                    withSonarQubeEnv(credentialsId: 'tocken') {

                            sh 'chmod +x gradlew'
                            sh './gradlew sonarqube'
                }


                      }
                      
                
                }
        }
    }
  
  }